import request from 'request-promise';
import cheerio from 'cheerio';

const BASE_URL = 'http://www.definebabe.com';

export default (id, slug) => {
  const OPTIONS  = {
    uri: `${BASE_URL}/gallery/${id}/${slug}/`,
    followAllRedirects: true,
    transform: function (body) {
      return cheerio.load(body);
    }
  };
  return request(OPTIONS)
    .then($ => {

      let gallery = {
        id,
        title: $('.gallery-block h1').text(),
        images: []
      };
      $('.gallery-block .galleries-list .thumb').map((i, item) => {
        let image = $(item).find('a').attr('href');
        gallery.images.push(image);
      });
      return Promise.resolve(gallery);
  });
}
